{% extends 'base.html' %}
{% block title %}All Articles{% endblock %}

{% block content %}
<style>
  h1 { margin-bottom: 2rem; }
  ul { list-style: none; padding: 0; }
  li.article-item { background: #fff; border: 1px solid #eee; border-radius: 8px; margin-bottom: 1rem; padding: 1.5rem; display: flex; justify-content: space-between; align-items: center; transition: box-shadow 0.2s; }
  li.article-item:hover { box-shadow: 0 4px 12px rgba(0,0,0,0.08); }
  .article-link { font-size: 1.2rem; font-weight: 700; text-decoration: none; }
  .article-link:hover { text-decoration: underline; }
  .admin-actions form { display: inline; margin-left: 0.5rem; }
  .admin-actions .btn { border: none; padding: 0.4rem 0.8rem; border-radius: 6px; cursor: pointer; text-decoration: none; font-size: 0.9rem; }
  .btn-edit { background: #ffc107; color: #333; }
  .btn-delete { background: #dc3545; color: white; }
</style>
<script>
  function confirmDelete(title) {
    return confirm(`Are you sure you want to delete the article: "${title}"?`);
  }
</script>

<h1>All Articles</h1>
<ul>
  {% for article in articles %}
    <li class="article-item">
      <a class="article-link" href="{{ url_for('article', slug=article.slug) }}">{{ article.title }}</a>
      {% if current_user.is_authenticated %}
        <div class="admin-actions">
          <a href="{{ url_for('edit_article', slug=article.slug) }}" class="btn btn-edit">Edit</a>
          <form action="{{ url_for('delete_article', slug=article.slug) }}" method="POST" onsubmit="return confirmDelete('{{ article.title }}')" style="display:inline;">
            <button type="submit" class="btn btn-delete">Delete</button>
          </form>
        </div>
      {% endif %}
    </li>
  {% else %}
    <li><h3>No articles yet. The admin can upload one!</h3></li>
  {% endfor %}
</ul>
{% endblock %}